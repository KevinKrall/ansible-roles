# {{ ansible_managed }}

auto {{ item.device }}
allow-hotplug {{ item.device }}

{% if item.ipv4 is defined %}
iface {{ item.device }} inet {{ item.type }}
{% if item.type == 'static' %}
    address     {{ item.ipv4.address }}
    netmask     {{ item.ipv4.netmask | d("255.255.255.0") }}
{% if item.ipv4.gateway is defined %}
    gateway     {{ item.ipv4.gateway }}
{% endif %}
{% endif %}
{% if item.hwaddress is defined %}
    hwaddress   {{ item.hwaddress }}
{% endif %}
{% if ipv4.pre_up | d() %}
    pre-up      {{ ipv4.pre_up }}
{% endif %}
{% if ipv4.up | d() %}
    up          {{ ipv4.up }}
{% endif %}
{% if ipv4.post_up | d() %}
    post-up     {{ ipv4.post_up }}
{% endif %}
{% if ipv4.pre_down | d() %}
    pre-down    {{ ipv4.pre_down }}
{% endif %}
{% if ipv4.down | d() %}
    down        {{ ipv4.down }}
{% endif %}
{% if ipv4.post_down | d() %}
    post-down   {{ ipv4.post_down }}
{% endif %}
{% else %}
iface {{ item.device }} inet manual
{% endif %}

{% if item.ipv6 is defined %}
iface {{ item.device }} inet6 {{ item.type }}
{% if item.type == 'static' %}
    address     {{ item.ipv6.address }}
    netmask     {{ item.ipv6.netmask | d("64") }}
{% if item.ipv6.gateway is defined %}
    gateway     {{ item.ipv6.gateway }}
{% endif %}
{% endif %}
{% if item.hwaddress | d() %}
    hwaddress   {{ item.hwaddress }}
{% endif %}
{% if ipv6.pre_up | d() %}
    pre-up      {{ ipv6.pre_up }}
{% endif %}
{% if ipv6.up | d() %}
    up          {{ ipv6.up }}
{% endif %}
{% if ipv6.post_up | d() %}
    post-up     {{ ipv6.post_up }}
{% endif %}
{% if ipv6.pre_down | d() %}
    pre-down    {{ ipv6.pre_down }}
{% endif %}
{% if ipv6.down | d() %}
    down        {{ ipv6.down }}
{% endif %}
{% if ipv6.post_down | d() %}
    post-down   {{ ipv6.post_down }}
{% endif %}
{% else %}
iface {{ item.device }} inet6 manual
{% endif %}
