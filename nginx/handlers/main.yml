---

- name: check nginx
  command: '{{ nginx_binary }} -t'

- name: check nginx and reload
  command: '{{ nginx_binary }} -t'
  notify:
    - 'reload nginx'

- name: check nginx and restart
  command: '{{ nginx_binary }} -t'
  notify:
    - 'restart nginx'

- name: restart nginx
  service:
    name: '{{ nginx_service }}'
    state: restarted

- name: reload nginx
  service:
    name: '{{ nginx_service }}'
    state: reloaded

- name: remove nginx default vhost
  file:
    path: '{{ nginx_default_vhost }}'
    state: absent
